
require RiggingToolbox;

operator entry(){

  StartFabricProfiling();
   	
   	GeometryStack stack();
   	PolygonMeshSphereGenerator sphereGenerator(2.0, 1, true, true);
   	PushDeformer pushDeformer(3.0);
   	sphereGenerator.enableCaching = true;
   	stack.addGeometryOperator(sphereGenerator);
   	stack.addGeometryOperator(pushDeformer);
   	stack.initCachePoints();

    EvalContext context();
    {
	    Geometry geometries[] = stack.evaluate(context);

	    report("NumGeometries:" + geometries.size);
	    for(Integer i=0; i<geometries.size; i++){
	        report(geometries[i].getDesc(true, true));
	    }
	}
	pushDeformer.setPushDist(6.0);
	{
	    Geometry geometries[] = stack.evaluate(context);

	    report("NumGeometries:" + geometries.size);
	    for(Integer i=0; i<geometries.size; i++){
	        report(geometries[i].getDesc(true, true));
	    }
	}
	
  StopFabricProfiling();

  report( GetEvalPathReport() );

  ProfilingEvent events[](GetProfilingEvents());
  for(Integer i=0; i<events.size; i++)
    report( events[i] );
}

